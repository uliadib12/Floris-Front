import{j as e}from"./jsx-runtime.G4i-1Giy.js";import{r as a}from"./index.UCAuQZPX.js";import{a as c,C as d}from"./cartServices.l6aAegER.js";function j(){const[s,r]=a.useState(c.EmptyCart());return a.useEffect(()=>{const n=d.getCartFromStorage();return n&&r(n),()=>{r(c.EmptyCart())}},[]),[s,r]}const p=a.createContext(null);function v({index:s}){const{productsCart:r,setProductsCart:n}=a.useContext(p),t=r.products[s],[l,m]=a.useState(t.quantity),x=i=>{m(i);const h=r.products;h[s].quantity=i,n(new c(h))},u=()=>{const i=l+1;x(i),d.updateProductInCart(t)},o=()=>{const i=l-1;i<1||(x(i),d.updateProductInCart(t))},b=()=>{d.removeProductFromCart(t.id);const i=r.products;i.splice(s,1),n(new c(i))},[g,f]=a.useState(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-sm w-full lg:max-w-full lg:flex",children:[e.jsx("div",{style:{backgroundImage:"url('/images/bouquet.webp')"},className:"h-64 lg:h-auto lg:w-48 flex-none bg-cover rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden"}),e.jsxs("div",{className:"w-full border-r border-b border-l border-pink-400 lg:border-l-0 lg:border-t lg:border-pink-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex justify-end relative",children:e.jsx("button",{onClick:b,className:"text-red-500 hover:text-red-800 text-xl absolute",children:e.jsx("div",{children:"X"})})}),e.jsx("div",{className:"text-gray-900 font-bold text-xl mb-2",children:t.name}),e.jsx("div",{className:"text-gray-700 text-base",children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Variant: ",t.variantName]}),e.jsxs("li",{className:"flex gap-2 items-center",children:["Price:",e.jsx("div",{className:"text-orange-500 font-semibold",children:t.price.toLocaleString("id-ID",{style:"currency",currency:"IDR"})})]}),e.jsxs("li",{children:["Size: ",t.size]}),e.jsx("li",{children:e.jsxs("button",{className:"text-blue-500 hover:text-blue-800",onClick:()=>f(!0),children:[e.jsx("i",{className:"bi bi-pencil-fill"}),"Additional Information: ",t.additionalInformation===""?"-":t.additionalInformation]})})]})})]}),e.jsxs("div",{className:"flex items-center text-white gap-4",children:[e.jsx("div",{className:"flex font-semibold w-10 h-10 rounded-full bg-pink-500 justify-center items-center",children:l}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:u,className:"bg-pink-400 hover:bg-pink-600 text-2xl px-5 rounded-md",children:"+"}),e.jsx("button",{onClick:o,className:"bg-pink-400 hover:bg-pink-600 text-2xl px-5 rounded-md",children:"-"})]})]}),e.jsxs("div",{className:"mt-4 text-orange-500 font-semibold",children:["Total: ",(t.price*l).toLocaleString("id-ID",{style:"currency",currency:"IDR"})]})]}),g&&e.jsx(y,{index:s,productsCart:r,product:t,setProductsCart:n,setShowModal:f})]})})}function y({index:s,productsCart:r,product:n,setProductsCart:t,setShowModal:l}){const[m,x]=a.useState(n.additionalInformation),u=()=>{const o=r.products;o[s].additionalInformation=m,t(new c(o)),d.updateProductInCart(n),l(!1)};return e.jsx("div",{className:"fixed z-50 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:"Additional Information"}),e.jsx("div",{className:"mt-2",children:e.jsx("textarea",{style:{resize:"none"},className:"border border-gray-400 rounded-md px-2 py-1 w-full h-16",value:m,onChange:o=>x(o.target.value)})})]})})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex justify-end sm:px-6 flex-col sm:flex sm:flex-row-reverse",children:[e.jsx("button",{onClick:u,type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-pink-400 text-base font-medium text-white hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Update"}),e.jsx("button",{onClick:()=>l(!1),type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})}function k(){const[s,r]=j();return e.jsx(p.Provider,{value:{productsCart:s,setProductsCart:r},children:e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 mb-3",children:[e.jsx("i",{className:"bi bi-cart text-pink-500 text-3xl"}),e.jsx("h1",{id:"title",style:{fontFamily:"Cormorant Garamond sans-serif"},className:"text-3xl font-semibold italic text-pink-500",children:"Cart"})]}),e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 mb-3 text-xl text-orange-500 font-bold",children:["Total Price: ",s.getTotalPrice().toLocaleString("id-ID",{style:"currency",currency:"IDR"})]}),e.jsxs("div",{className:"flex flex-row items-center justify-center gap-2 mb-3 text-xl text-orange-500 font-bold",children:["Total Items: ",s.getTotalItems()]}),e.jsx("div",{className:"flex flex-col gap-4 p-4 items-center",children:s.products.map((n,t)=>e.jsx(v,{index:t},t))}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 flex justify-end z-50",children:e.jsxs("a",{href:"/checkout",className:"flex gap-2 bg-pink-500 border-solid border-white border-2 px-4 py-2 rounded-md text-white",children:["Go To Checkout",e.jsx("img",{src:"/icons/bag-check.svg",width:20,height:20,alt:"home",style:{filter:"invert(1)"}})]})})]})})}export{k as default};
